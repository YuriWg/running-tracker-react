{"ast":null,"code":"import React from'react';import html2canvas from'html2canvas';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ExportButton=()=>{const exportVisualization=()=>{showToast(\"正在生成图片...\",\"loading\");setTimeout(()=>{const mainContainer=document.querySelector('.main-container');html2canvas(mainContainer,{scale:2,backgroundColor:'#FDFAF6',logging:false,allowTaint:true,useCORS:true}).then(canvas=>{hideToast();const link=document.createElement('a');link.download=`跑步追踪_${new Date().toISOString().split('T')[0]}.png`;link.href=canvas.toDataURL('image/png');link.click();showToast(\"图片已成功导出！\",\"success\");}).catch(error=>{console.error(\"导出图片错误:\",error);hideToast();showToast(\"导出失败，请重试\",\"error\");});},100);};const showToast=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"info\";let toast=document.querySelector('.export-toast');if(toast)toast.remove();toast=document.createElement('div');toast.className='export-toast';toast.style.position='fixed';toast.style.bottom='20px';toast.style.left='50%';toast.style.transform='translateX(-50%)';toast.style.background=type===\"error\"?\"#FF5252\":type===\"success\"?\"#4CAF50\":type===\"loading\"?\"#2196F3\":\"#333\";toast.style.color='white';toast.style.padding='10px 20px';toast.style.borderRadius='4px';toast.style.boxShadow='0 2px 10px rgba(0,0,0,0.2)';toast.style.zIndex='9999';toast.style.fontSize='14px';toast.style.opacity='0';toast.style.transition='opacity 0.3s ease';let content=\"\";if(type===\"loading\"){content=`<span style=\"display:inline-block;width:12px;height:12px;border:2px solid white;border-radius:50%;border-top-color:transparent;margin-right:8px;animation:spin 1s linear infinite;\"></span>`;}else if(type===\"success\"){content=`<span style=\"margin-right:8px;\">✓</span>`;}else if(type===\"error\"){content=`<span style=\"margin-right:8px;\">✗</span>`;}toast.innerHTML=content+message;document.body.appendChild(toast);// 添加动画样式\nconst style=document.createElement('style');style.textContent=`\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    `;document.head.appendChild(style);setTimeout(()=>toast.style.opacity='1',10);if(type!==\"loading\"){setTimeout(()=>{toast.style.opacity=\"0\";setTimeout(()=>toast.remove(),300);},3000);}return toast;};const hideToast=()=>{const toast=document.querySelector('.export-toast');if(toast){toast.style.opacity=\"0\";setTimeout(()=>toast.remove(),300);}};return/*#__PURE__*/_jsx(\"div\",{className:\"export-button\",onClick:exportVisualization,children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"7 10 12 15 17 10\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"15\",x2:\"12\",y2:\"3\"})]})});};export default ExportButton;","map":{"version":3,"names":["React","html2canvas","jsx","_jsx","jsxs","_jsxs","ExportButton","exportVisualization","showToast","setTimeout","mainContainer","document","querySelector","scale","backgroundColor","logging","allowTaint","useCORS","then","canvas","hideToast","link","createElement","download","Date","toISOString","split","href","toDataURL","click","catch","error","console","message","type","arguments","length","undefined","toast","remove","className","style","position","bottom","left","transform","background","color","padding","borderRadius","boxShadow","zIndex","fontSize","opacity","transition","content","innerHTML","body","appendChild","textContent","head","onClick","children","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","points","x1","y1","x2","y2"],"sources":["/Users/wyl/Documents/GitHub/running-tracker-react/src/components/ExportButton.js"],"sourcesContent":["import React from 'react';\nimport html2canvas from 'html2canvas';\n\nconst ExportButton = () => {\n  const exportVisualization = () => {\n    showToast(\"正在生成图片...\", \"loading\");\n    \n    setTimeout(() => {\n      const mainContainer = document.querySelector('.main-container');\n      \n      html2canvas(mainContainer, {\n        scale: 2,\n        backgroundColor: '#FDFAF6',\n        logging: false,\n        allowTaint: true,\n        useCORS: true,\n      }).then(canvas => {\n        hideToast();\n        \n        const link = document.createElement('a');\n        link.download = `跑步追踪_${new Date().toISOString().split('T')[0]}.png`;\n        link.href = canvas.toDataURL('image/png');\n        link.click();\n        \n        showToast(\"图片已成功导出！\", \"success\");\n      }).catch(error => {\n        console.error(\"导出图片错误:\", error);\n        hideToast();\n        showToast(\"导出失败，请重试\", \"error\");\n      });\n    }, 100);\n  };\n\n  const showToast = (message, type = \"info\") => {\n    let toast = document.querySelector('.export-toast');\n    if (toast) toast.remove();\n    \n    toast = document.createElement('div');\n    toast.className = 'export-toast';\n    toast.style.position = 'fixed';\n    toast.style.bottom = '20px';\n    toast.style.left = '50%';\n    toast.style.transform = 'translateX(-50%)';\n    toast.style.background = type === \"error\" ? \"#FF5252\" : \n                             type === \"success\" ? \"#4CAF50\" : \n                             type === \"loading\" ? \"#2196F3\" : \"#333\";\n    toast.style.color = 'white';\n    toast.style.padding = '10px 20px';\n    toast.style.borderRadius = '4px';\n    toast.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';\n    toast.style.zIndex = '9999';\n    toast.style.fontSize = '14px';\n    toast.style.opacity = '0';\n    toast.style.transition = 'opacity 0.3s ease';\n    \n    let content = \"\";\n    if (type === \"loading\") {\n      content = `<span style=\"display:inline-block;width:12px;height:12px;border:2px solid white;border-radius:50%;border-top-color:transparent;margin-right:8px;animation:spin 1s linear infinite;\"></span>`;\n    } else if (type === \"success\") {\n      content = `<span style=\"margin-right:8px;\">✓</span>`;\n    } else if (type === \"error\") {\n      content = `<span style=\"margin-right:8px;\">✗</span>`;\n    }\n    \n    toast.innerHTML = content + message;\n    document.body.appendChild(toast);\n    \n    // 添加动画样式\n    const style = document.createElement('style');\n    style.textContent = `\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    `;\n    document.head.appendChild(style);\n    \n    setTimeout(() => toast.style.opacity = '1', 10);\n    \n    if (type !== \"loading\") {\n      setTimeout(() => {\n        toast.style.opacity = \"0\";\n        setTimeout(() => toast.remove(), 300);\n      }, 3000);\n    }\n    \n    return toast;\n  };\n\n  const hideToast = () => {\n    const toast = document.querySelector('.export-toast');\n    if (toast) {\n      toast.style.opacity = \"0\";\n      setTimeout(() => toast.remove(), 300);\n    }\n  };\n\n  return (\n    <div className=\"export-button\" onClick={exportVisualization}>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n        <polyline points=\"7 10 12 15 17 10\"></polyline>\n        <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"></line>\n      </svg>\n    </div>\n  );\n};\n\nexport default ExportButton;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}