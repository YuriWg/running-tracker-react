{"ast":null,"code":"var _jsxFileName = \"/Users/wyl/Documents/GitHub/running-tracker-react/src/components/ExportButton.js\";\nimport React from 'react';\nimport html2canvas from 'html2canvas';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ExportButton = () => {\n  const exportVisualization = () => {\n    showToast(\"正在生成图片...\", \"loading\");\n    setTimeout(() => {\n      const mainContainer = document.querySelector('.main-container');\n      html2canvas(mainContainer, {\n        scale: 2,\n        backgroundColor: '#FDFAF6',\n        logging: false,\n        allowTaint: true,\n        useCORS: true\n      }).then(canvas => {\n        hideToast();\n        const link = document.createElement('a');\n        link.download = `跑步追踪_${new Date().toISOString().split('T')[0]}.png`;\n        link.href = canvas.toDataURL('image/png');\n        link.click();\n        showToast(\"图片已成功导出！\", \"success\");\n      }).catch(error => {\n        console.error(\"导出图片错误:\", error);\n        hideToast();\n        showToast(\"导出失败，请重试\", \"error\");\n      });\n    }, 100);\n  };\n  const showToast = (message, type = \"info\") => {\n    let toast = document.querySelector('.export-toast');\n    if (toast) toast.remove();\n    toast = document.createElement('div');\n    toast.className = 'export-toast';\n    toast.style.position = 'fixed';\n    toast.style.bottom = '20px';\n    toast.style.left = '50%';\n    toast.style.transform = 'translateX(-50%)';\n    toast.style.background = type === \"error\" ? \"#FF5252\" : type === \"success\" ? \"#4CAF50\" : type === \"loading\" ? \"#2196F3\" : \"#333\";\n    toast.style.color = 'white';\n    toast.style.padding = '10px 20px';\n    toast.style.borderRadius = '4px';\n    toast.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';\n    toast.style.zIndex = '9999';\n    toast.style.fontSize = '14px';\n    toast.style.opacity = '0';\n    toast.style.transition = 'opacity 0.3s ease';\n    let content = \"\";\n    if (type === \"loading\") {\n      content = `<span style=\"display:inline-block;width:12px;height:12px;border:2px solid white;border-radius:50%;border-top-color:transparent;margin-right:8px;animation:spin 1s linear infinite;\"></span>`;\n    } else if (type === \"success\") {\n      content = `<span style=\"margin-right:8px;\">✓</span>`;\n    } else if (type === \"error\") {\n      content = `<span style=\"margin-right:8px;\">✗</span>`;\n    }\n    toast.innerHTML = content + message;\n    document.body.appendChild(toast);\n\n    // 添加动画样式\n    const style = document.createElement('style');\n    style.textContent = `\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    `;\n    document.head.appendChild(style);\n    setTimeout(() => toast.style.opacity = '1', 10);\n    if (type !== \"loading\") {\n      setTimeout(() => {\n        toast.style.opacity = \"0\";\n        setTimeout(() => toast.remove(), 300);\n      }, 3000);\n    }\n    return toast;\n  };\n  const hideToast = () => {\n    const toast = document.querySelector('.export-toast');\n    if (toast) {\n      toast.style.opacity = \"0\";\n      setTimeout(() => toast.remove(), 300);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"export-button\",\n    onClick: exportVisualization,\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width: \"16\",\n      height: \"16\",\n      viewBox: \"0 0 24 24\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      strokeWidth: \"2\",\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n        points: \"7 10 12 15 17 10\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n        x1: \"12\",\n        y1: \"15\",\n        x2: \"12\",\n        y2: \"3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n};\n_c = ExportButton;\nexport default ExportButton;\nvar _c;\n$RefreshReg$(_c, \"ExportButton\");","map":{"version":3,"names":["React","html2canvas","jsxDEV","_jsxDEV","ExportButton","exportVisualization","showToast","setTimeout","mainContainer","document","querySelector","scale","backgroundColor","logging","allowTaint","useCORS","then","canvas","hideToast","link","createElement","download","Date","toISOString","split","href","toDataURL","click","catch","error","console","message","type","toast","remove","className","style","position","bottom","left","transform","background","color","padding","borderRadius","boxShadow","zIndex","fontSize","opacity","transition","content","innerHTML","body","appendChild","textContent","head","onClick","children","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","fileName","_jsxFileName","lineNumber","columnNumber","points","x1","y1","x2","y2","_c","$RefreshReg$"],"sources":["/Users/wyl/Documents/GitHub/running-tracker-react/src/components/ExportButton.js"],"sourcesContent":["import React from 'react';\nimport html2canvas from 'html2canvas';\n\nconst ExportButton = () => {\n  const exportVisualization = () => {\n    showToast(\"正在生成图片...\", \"loading\");\n    \n    setTimeout(() => {\n      const mainContainer = document.querySelector('.main-container');\n      \n      html2canvas(mainContainer, {\n        scale: 2,\n        backgroundColor: '#FDFAF6',\n        logging: false,\n        allowTaint: true,\n        useCORS: true,\n      }).then(canvas => {\n        hideToast();\n        \n        const link = document.createElement('a');\n        link.download = `跑步追踪_${new Date().toISOString().split('T')[0]}.png`;\n        link.href = canvas.toDataURL('image/png');\n        link.click();\n        \n        showToast(\"图片已成功导出！\", \"success\");\n      }).catch(error => {\n        console.error(\"导出图片错误:\", error);\n        hideToast();\n        showToast(\"导出失败，请重试\", \"error\");\n      });\n    }, 100);\n  };\n\n  const showToast = (message, type = \"info\") => {\n    let toast = document.querySelector('.export-toast');\n    if (toast) toast.remove();\n    \n    toast = document.createElement('div');\n    toast.className = 'export-toast';\n    toast.style.position = 'fixed';\n    toast.style.bottom = '20px';\n    toast.style.left = '50%';\n    toast.style.transform = 'translateX(-50%)';\n    toast.style.background = type === \"error\" ? \"#FF5252\" : \n                             type === \"success\" ? \"#4CAF50\" : \n                             type === \"loading\" ? \"#2196F3\" : \"#333\";\n    toast.style.color = 'white';\n    toast.style.padding = '10px 20px';\n    toast.style.borderRadius = '4px';\n    toast.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';\n    toast.style.zIndex = '9999';\n    toast.style.fontSize = '14px';\n    toast.style.opacity = '0';\n    toast.style.transition = 'opacity 0.3s ease';\n    \n    let content = \"\";\n    if (type === \"loading\") {\n      content = `<span style=\"display:inline-block;width:12px;height:12px;border:2px solid white;border-radius:50%;border-top-color:transparent;margin-right:8px;animation:spin 1s linear infinite;\"></span>`;\n    } else if (type === \"success\") {\n      content = `<span style=\"margin-right:8px;\">✓</span>`;\n    } else if (type === \"error\") {\n      content = `<span style=\"margin-right:8px;\">✗</span>`;\n    }\n    \n    toast.innerHTML = content + message;\n    document.body.appendChild(toast);\n    \n    // 添加动画样式\n    const style = document.createElement('style');\n    style.textContent = `\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    `;\n    document.head.appendChild(style);\n    \n    setTimeout(() => toast.style.opacity = '1', 10);\n    \n    if (type !== \"loading\") {\n      setTimeout(() => {\n        toast.style.opacity = \"0\";\n        setTimeout(() => toast.remove(), 300);\n      }, 3000);\n    }\n    \n    return toast;\n  };\n\n  const hideToast = () => {\n    const toast = document.querySelector('.export-toast');\n    if (toast) {\n      toast.style.opacity = \"0\";\n      setTimeout(() => toast.remove(), 300);\n    }\n  };\n\n  return (\n    <div className=\"export-button\" onClick={exportVisualization}>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n        <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n        <polyline points=\"7 10 12 15 17 10\"></polyline>\n        <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"></line>\n      </svg>\n    </div>\n  );\n};\n\nexport default ExportButton;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}